name = "crabigator-api"
main = "src/index.ts"
compatibility_date = "2024-12-01"

# D1 Database for persistent storage
[[d1_databases]]
binding = "DB"
database_name = "crabigator"
database_id = "884ae30b-0a93-4716-83f6-89f62a18156a"

# KV for tokens and ephemeral data
[[kv_namespaces]]
binding = "TOKENS"
id = "e35b69000ee445469639878d623139a5"

# Durable Objects for session state
[[durable_objects.bindings]]
name = "SESSION"
class_name = "SessionDO"

[[durable_objects.bindings]]
name = "SESSION_LIST"
class_name = "SessionListDO"

[[migrations]]
tag = "v1"
new_sqlite_classes = ["SessionDO"]

[[migrations]]
tag = "v2"
new_sqlite_classes = ["SessionListDO"]

[[migrations]]
tag = "v3"
deleted_classes = ["SessionListDO"]

[[migrations]]
tag = "v4"
new_sqlite_classes = ["SessionListDO"]

# Production routes
[[routes]]
pattern = "drinkcrabigator.com/api/*"
zone_name = "drinkcrabigator.com"

[[routes]]
pattern = "drinkcrabigator.com/dashboard"
zone_name = "drinkcrabigator.com"

[[routes]]
pattern = "drinkcrabigator.com/"
zone_name = "drinkcrabigator.com"

[vars]
API_VERSION = "v1"
